<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="js/bootstrap.min.js">
    <link rel="stylesheet" href="css/style.css">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="js/jquery-3.6.0.min.js">
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <title>Главная ЦОПП | ТСПК</title>
</head>
<body style="">
<header>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-lg">
            <a class="navbar-brand" href="#">
                <div class="logo">ЦОПП|ТСПК
                    <img src="img/scratch.svg" alt="Логотип Цоппа|Тспк">
                </div>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item mx-2" id="active-header">
                        <a class="nav-link" aria-current="page" href="./index.html">Карта</a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link" href="./college.html">Колледжам/вузам</a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link" href="#">Работодателям</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>
<main class="row container-fluid p-0 m-0">
    <aside class="col-3 m- p-0">
        <div class="banner-brand-wsr text-center p-3">
            <h2 class="text-uppercase fs-3">Компетенции WSR</h2>
        </div>
        <div class="accordion competences overflow-auto" id="accordionPanelsStayOpenExample">

        </div>
    </aside>
    <div class="col-9 m- p-0">
        <div class="background-map">
        </div>
    </div>
</main>
<script>
    const renderMainBlock = (title, id) => {
        $(`.competences`).append(`
            <div class="accordion-item" id="${id}_competition">
                <h2 class="accordion-header" id="panelsStayOpen-heading-${id}">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapse-${id}" aria-expanded="false"
                            aria-controls="panelsStayOpen-collapse-${id}">
                        ${title}
                    </button>
                </h2>
                <div id="panelsStayOpen-collapse-${id}" class="accordion-collapse collapse"
                     aria-labelledby="panelsStayOpen-heading-${id}">
                    <div class="accordion-body">
                    </div>
                </div>
            </div>`)
    }

    const renderSubBlock = (id, subTitle) => {
        let infoDiv = createId(3);
        console.log("шаров еблан")
        $(`#panelsStayOpen-collapse-${id} > .accordion-body`).append(`
                        <div class="accordion" id="accordionPanelsStayOpenExample-sub-${id}">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="panelsStayOpen-heading-${id}${infoDiv}">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#panelsStayOpen-collapse-${id}${infoDiv}" aria-expanded="false"
                                            aria-controls="panelsStayOpen-collapse-${id}${infoDiv}">
                                    ${subTitle}
                                </h2>
                                <div id="panelsStayOpen-collapse-${id}${infoDiv}" class="accordion-collapse collapse"
                                     aria-labelledby="panelsStayOpen-heading-${id}${infoDiv}">
                                    <div class="accordion-body">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault">
                                            <label class="form-check-label" for="flexSwitchCheckDefault">Что то</label>
                                        </div>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked"
                                                   checked>
                                            <label class="form-check-label" for="flexSwitchCheckChecked">Выбранное поле
                                                флажок переключатель</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
  `)
    }

    const createId = length => {
        let result = [];
        let characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        let charactersLength = characters.length;
        for (var i = 0; i < length; i++) {
            result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
        }
        return result.join('');
    }

    fetch("./data.json").then(async response => {
        (await response.json()).forEach(element => {
            const title = element.Title;
            const subTitles = element.subTitle;
            const id = createId(5) + title.length;
            renderMainBlock(title, id);
            subTitles.forEach(subTitle => {
                renderSubBlock(id, subTitle.subObject);
            });
        });
    });
</script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>
</body>
</html>